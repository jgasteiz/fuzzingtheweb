<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>{% block title %}{% endblock %}</title>
        <link rel="shortcut icon" href="{{ STATIC_URL }}images/favicon.png" type="image/x-icon">
        <meta name="author" content="Javi Manzano">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Fuzzopress styles -->
        <link rel="stylesheet" href="{{ STATIC_URL }}css/font/font-awesome.css">
        <link rel="stylesheet" href="{{ STATIC_URL }}css/main.css">
        <style type="text/css">
            body.night-mode a:hover {
                color: {{ colour }};
            }
            a:hover {
                color: {{ colour }};
            }
            ::selection,
            ::-moz-selection {
                background: {{ colour }};
            }
        </style>

        <!-- Code block styles -->
        <link rel="stylesheet" href="{{ STATIC_URL }}highlight/styles/monokai.css">
        <script src="{{ STATIC_URL }}highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body>

        <header class="main-header"></header>
        <nav>
            <select class="responsive-navbar" onchange="location.href=this.value">
                <option selected value="/">Navigate</option>
                <option value="/">Home</option>
                
                {% for item in navItems %}
                    <option value="{{ item.url }}">
                        {{ item.name }}
                    </option>
                {% endfor %}
                
                {% if user.is_superuser %}
                    <option value="/admin/blog/post/add/">
                        Post
                    </option>
                {% endif %}
            </select>
            <ul>
                <li>
                    <a href="/">
                        Home
                    </a>
                </li>
                
                {% for item in navItems %}
                <li>
                    <a href="{{ item.url }}">
                        {{ item.name }}
                    </a>
                </li>
                {% endfor %}
                
                {% if user.is_superuser %}
                <li>
                    <a target="_blank" href="/admin/blog/post/add/">
                        <i class="icon-pencil icon-large"></i>
                    </a>
                </li>
                {% endif %}
            </ul>
            <i class="light-switch"></i>
        </nav>
        <div class="main-container">

            <div class="main-content {% if settings.sidebar.show %}sidebar{% endif %}">

                <div class="articles">
                    {% block content %}{% endblock %}
                </div>

                {% if settings.sidebar.show %}
                <aside>

                    <!-- Search -->
                    {% if settings.searchbox.show %}
                        <section class="search">
                            <input type="text" class="fuzz-finder" placeholder="Find a post">
                            <button class="fuzz-finder-go">Go</button>
                        </section>
                    {% endif %}

                    <!-- Archive month -->
                    {% if settings.archive.show and archives %}
                        <section>
                            <span class="title">Archives</span>
                            {% for year, month_list in archives %}
                                <!-- year -->
                                <span>{{ year }}</span>
                                <select onchange="if(this.value){location.href=this.value;}">
                                    <option selected="selected">
                                        Choose month
                                    </option>
                                    <!-- Months -->
                                    {% for month, has_link in month_list %}
                                        {% if has_link %}
                                            <option value="/{{ month.year }}/{{ month.month }}/">
                                                {{ month|date:"M" }}
                                            </option>
                                        {% endif %}
                                    {% endfor %}
                                </select>
                            {% endfor %}
                        </section>
                    {% endif %}

                    <!-- Tags -->
                    {% if settings.tags.show %}
                        <section>
                            <span class="title">Tags</span>
                            {% for tag in tags %}
                                <a href="/tag/{{ tag.name }}/">{{ tag.name }}</a>
                            {% endfor %}
                        </section>
                    {% endif %}

                    <!-- RSS feed url -->
                    {% if settings.rss.show %}
                        <section>
                            <span class="title">
                                RSS Feed
                            </span>
                            <a target="_blank" class="no-decoration" href="/rssfeed/">
                                <i class="icon big-icon icon-rss"></i>
                            </a>
                        </section>
                    {% endif %}
                    
                    {% if settings.github.show %}
                        <!-- You can delete this widget if you want -->
                        <section>
                            <span class="block uppercase strong ptsans big">
                                Follow me on github
                            </span>
                            <a target="_blank" class="no-decoration" href="https://github.com/{{ settings.github.username }}">
                                <i class="icon big-icon icon-github"></i>
                            </a>
                        </section>
                    {% endif %}

                    {% for item in widgets %}
                        <section>
                            <span class="title">
                                {{ item.name }}
                            </span>
                            {{ item.body|safe }}
                        </section>
                    {% endfor %}
                    
                </aside>
                {% endif %}

                <div class="clear-both"></div>
            </div>
        </div>

        <footer>
            This a simple blog app developed in Django by Javi Manzano. <a target="_blank" href="https://github.com/jgasteiz/fuzzopress">View on github</a>. Slightly inspired by <a target="_blank" href="http://octopress.org/">Octopress</a>.
        </footer>

        <!-- Le javascript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script type="text/javascript" src="{{ STATIC_URL }}js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}js/main.min.js"></script>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'fuzzingtheweb';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var s = document.createElement('script'); 
                s.async = true;
                s.type = 'text/javascript';
                s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
                (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
            }());
        </script>
    </body>
</html>